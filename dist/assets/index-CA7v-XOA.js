(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}})();function T(){const i=document.getElementById("theme-toggle"),n=document.body,a=document.querySelector(".background-gradient"),c=document.querySelectorAll("[data-bg-theme]");if(localStorage.getItem("theme")==="dark"&&n.classList.add("dark-mode"),i&&i.addEventListener("click",()=>{n.classList.toggle("dark-mode"),n.classList.contains("dark-mode")?localStorage.setItem("theme","dark"):localStorage.setItem("theme","light")}),a&&c.length){const r=new IntersectionObserver(o=>{const l=o.filter(u=>u.isIntersecting).sort((u,g)=>g.intersectionRatio-u.intersectionRatio)[0];if(!l)return;const d=l.target.getAttribute("data-bg-theme");d&&a.setAttribute("data-theme",d)},{threshold:.5});c.forEach(o=>r.observe(o))}}function k(){const i=document.querySelector(".cursor-dot"),n=document.querySelector(".cursor-outline");i&&n&&(window.addEventListener("mousemove",c=>{const r=c.clientX,o=c.clientY;i.style.left=`${r}px`,i.style.top=`${o}px`,n.animate({left:`${r}px`,top:`${o}px`},{duration:500,fill:"forwards"})}),document.querySelectorAll("a, button, .project-item, .segment-card").forEach(c=>{c.addEventListener("mouseenter",()=>{n.style.transform="translate(-50%, -50%) scale(1.5)",n.style.backgroundColor="rgba(0, 0, 0, 0.1)",n.style.borderColor="transparent"}),c.addEventListener("mouseleave",()=>{n.style.transform="translate(-50%, -50%) scale(1)",n.style.backgroundColor="transparent",n.style.borderColor="rgba(0, 0, 0, 0.2)"})}))}function q(){const i=document.querySelectorAll(".reveal-text, .reveal-up"),n=new IntersectionObserver(a=>{a.forEach(c=>{c.isIntersecting&&c.target.classList.add("reveal-visible")})},{threshold:.1});i.forEach(a=>n.observe(a))}function I(){const i=document.querySelector(".menu-toggle"),n=document.querySelector(".main-nav");i&&n&&(i.addEventListener("click",()=>{n.classList.toggle("active"),i.classList.toggle("active")}),n.querySelectorAll("a").forEach(a=>{a.addEventListener("click",()=>{n.classList.remove("active"),i.classList.remove("active")})}))}function j(){const i=document.getElementById("project-explorer"),n=document.querySelector(".close-explorer"),a=document.getElementById("category-view"),c=document.getElementById("project-detail-view"),r=document.getElementById("explorer-title"),o=document.getElementById("project-grid"),l=document.getElementById("project-title"),d=document.getElementById("project-gallery"),u=document.querySelector(".back-to-category"),g=document.querySelectorAll(".segment-card");let f={};const p=new Map,h=new Set;function E(){g.forEach(e=>{var b,y;const t=e.querySelector(".segment-thumb");if(!t)return;const s=e.dataset.segment||((y=(b=e.querySelector("h3"))==null?void 0:b.innerText)==null?void 0:y.trim());if(!s)return;const m=s.replace(/\s+/g,"_");t.getAttribute("src")||(t.src=`/resources/${m}/thumbnail.png`),p.set(s,t),t.addEventListener("error",()=>L(s,t))})}function L(e,t){if(t.dataset.thumbnailState==="fallback"){t.dataset.thumbnailState="missing",t.classList.add("segment-thumb--missing");return}t.dataset.thumbnailState="pending",t.classList.add("segment-thumb--missing"),h.add(e),v(e)}function v(e){const t=p.get(e);if(!t)return;const s=(f[e]||[])[0];s!=null&&s.thumbnail&&(t.dataset.thumbnailState="fallback",t.classList.remove("segment-thumb--missing"),t.src=s.thumbnail,h.delete(e))}E(),fetch("/projects.json").then(e=>e.ok?e.json():{}).then(e=>{f=e,console.log("Projects loaded:",f),h.forEach(t=>v(t))}).catch(e=>console.error("Error loading projects:",e)),g.forEach(e=>{e.addEventListener("click",()=>{var s;const t=e.dataset.segment||((s=e.querySelector("h3"))==null?void 0:s.innerText);t&&S(t)})}),n&&n.addEventListener("click",()=>{i.classList.remove("active"),setTimeout(()=>{a.classList.add("active"),c.classList.remove("active")},400)}),u&&u.addEventListener("click",()=>{c.classList.remove("active"),a.classList.add("active")});function S(e){if(!r||!o||!i)return;r.innerText=e,o.innerHTML="";const t=f[e]||[];t.length===0?o.innerHTML='<p style="font-size: 1.5rem; text-align: center; grid-column: 1/-1;">No projects found. Please add folders to public/resources/'+e+"</p>":t.forEach(s=>{const m=document.createElement("div");m.className="explorer-item",m.innerHTML=`
                    <div class="explorer-thumb" style="background-image: url('${s.thumbnail}')"></div>
                    <h3>${s.name}</h3>
                `,m.addEventListener("click",()=>x(s)),o.appendChild(m)}),i.classList.add("active")}function x(e){!l||!d||(l.innerText=e.name,d.innerHTML="",e.images.forEach(t=>{const s=document.createElement("img");s.src=t,s.className="gallery-image",s.loading="lazy",d.appendChild(s)}),a.classList.remove("active"),c.classList.add("active"))}}console.log("ARCH. Digital Studio loaded");document.addEventListener("DOMContentLoaded",()=>{T(),k(),q(),I(),j()});
